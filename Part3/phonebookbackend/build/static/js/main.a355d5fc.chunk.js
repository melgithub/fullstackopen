(window.webpackJsonpphonebook=window.webpackJsonpphonebook||[]).push([[0],{15:function(e,t,n){e.exports=n(38)},20:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(13),o=n.n(c),u=(n(20),n(14)),l=n(2),i=function(e){var t=e.value,n=e.onChange;return r.a.createElement("div",null,"Filter by name: ",r.a.createElement("input",{value:t,onChange:n}))},m=function(e){var t=e.onSubmit,n=e.name,a=e.number,c=e.handleNameEvent,o=e.handleNumberEvent;return r.a.createElement("form",{onSubmit:t},r.a.createElement("div",null,"Name: ",r.a.createElement("input",{value:n,onChange:c})),r.a.createElement("div",null,"Phone: ",r.a.createElement("input",{value:a,onChange:o})),r.a.createElement("div",null,r.a.createElement("button",null,"Add")))},s=function(e){var t=e.name,n=e.number,a=e.buttonAction,c=e.id;return r.a.createElement("li",{key:c},t," - ",n,r.a.createElement("button",{onClick:function(){return a(c,t)}},"Delete"))},f=function(e){var t=e.list,n=e.buttonAction;return t.map((function(e){return r.a.createElement(s,{key:e.id,name:e.name,number:e.number,id:e.id,buttonAction:n})}))},d=n(3),b=n.n(d),p="/api/persons",v=function(){return b.a.get(p)},h=function(e){return b.a.post(p,e)},E=function(e,t){return b.a.put("".concat(p,"/").concat(e),t)},O=function(e){return b.a.delete("".concat(p,"/").concat(e),{params:{id:e}})},g=function(e){var t=e.message,n=e.msgType;return null===t?null:r.a.createElement("div",{className:n},t)};function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var y=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(""),s=Object(l.a)(o,2),d=s[0],b=s[1],p=Object(a.useState)(""),y=Object(l.a)(p,2),w=y[0],S=y[1],P=Object(a.useState)(!0),k=Object(l.a)(P,2),C=k[0],N=k[1],A=Object(a.useState)(""),D=Object(l.a)(A,2),T=D[0],x=D[1],F=Object(a.useState)(null),J=Object(l.a)(F,2),L=J[0],B=J[1],I=Object(a.useState)(""),R=Object(l.a)(I,2),W=R[0],q=R[1];Object(a.useEffect)((function(){v().then((function(e){c(e.data)})).catch((function(e){q("error"),B("Failed fetching data.")}))}),[]);var z=C?n:n.filter((function(e){return-1!==e.name.toLowerCase().search(T)}));return r.a.createElement("div",null,r.a.createElement("h2",null,"React Phonebook"),r.a.createElement(i,{value:T,onChange:function(e){x(e.target.value.toLowerCase()),N(!1)}}),r.a.createElement("h3",null,"Add new contact"),r.a.createElement(m,{onSubmit:function(e){if(e.preventDefault(),n.find((function(e){return e.name===d}))){if(window.confirm("".concat(d," already exists. Would you like to update their phone number?"))){var t=n.find((function(e){return e.name===d})),a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{number:w});E(t.id,a).then((function(e){c(n.filter((function(e){return e.name!==d})).concat(e.data)),q("success"),B("Contact ".concat(d," updated.")),setTimeout((function(){B(null)}),5e3)})).catch((function(e){q("error"),B("".concat(d," has already been deleted from the server."))}))}}else h({name:d,number:w}).then((function(e){c(n.concat(e.data)),q("success"),B("Contact ".concat(d," added.")),setTimeout((function(){B(null)}),5e3)})).catch((function(e){console.log(e.response.data),q("error"),B("Entry not valid.")}));b(""),S("")},name:d,number:w,handleNameEvent:function(e){console.log(e.target.value),b(e.target.value)},handleNumberEvent:function(e){console.log(e.target.value),S(e.target.value)}}),r.a.createElement(g,{message:L,msgType:W}),r.a.createElement("h3",null,"Numbers"),r.a.createElement("ul",null,r.a.createElement(f,{list:z,buttonAction:function(e,t){window.confirm("Permanently delete ".concat(t,"?"))&&O(e).then(c(n.filter((function(t){return t.id!==e}))),q("success"),B("".concat(t," deleted from the server.")),setTimeout((function(){B(null)}),5e3)).catch((function(e){q("error"),B("".concat(t," has already been deleted from the server."))}))}})))};o.a.render(r.a.createElement(y,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.a355d5fc.chunk.js.map